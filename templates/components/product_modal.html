<!-- templates/components/product_modal.html -->
<div
  class="modal fade"
  id="productModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="productModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">[[ selected_product.title ]]</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body d-flex flex-column flex-md-row">
        <img
          :src="selected_product.image ? selected_product.image : '/static/default.jpg'"
          class="img-fluid mb-3 mb-md-0 mr-md-3"
          alt="Product Image"
          style="max-width: 300px;"
        />

        <div>
          <p class="text-muted">Category: [[ selected_product.category ]]</p>
          <p>[[ selected_product.description ]]</p>
          <h5 class="text-primary">$[[ selected_product.price ]]</h5>
          <button class="btn btn-sm btn-outline-primary mt-2" @click="addToCart(selected_product)">
            Add to Cart
          </button>


          <div class="mt-3">
            <label>Rate this product:</label>
            <div>
              <span
                v-for="n in 5"
                :key="n"
                @click="submitRating(selected_product.id, n)"
                style="cursor:pointer; font-size: 1.4rem;"
              >
                <i :class="n <= (selected_product.userRating || 0) ? 'text-warning fas fa-star' : 'text-muted far fa-star'"></i>
              </span>
            </div>
          </div>

          <p class="mt-2">
            ‚≠ê [[ selected_product.rating_rate?.toFixed(1) || 0 ]] ( [[ selected_product.rating_count || 0 ]] reviews )
          </p>

        </div>
      </div>
    </div>
  </div>
</div>

